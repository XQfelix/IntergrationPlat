webpackJsonp([65],{"+0Qw":function(t,e){},"+Tn7":function(t,e){},"0u1n":function(t,e){},"1LBi":function(t,e){},"1O6n":function(t,e){},"1Z8u":function(t,e){},"2ZBE":function(t,e){},"3Clc":function(t,e){},"3j2o":function(t,e){},"4Yhh":function(t,e){},"5RGO":function(t,e){},"5kgg":function(t,e){},"5v36":function(t,e){},"67ys":function(t,e){},"7Do+":function(t,e){},"84z/":function(t,e){},"8EM9":function(t,e){},"8dAB":function(t,e){},"9Dq5":function(t,e){},"9vcT":function(t,e){},ADar:function(t,e){},C9H4:function(t,e){},Cvw8:function(t,e){},"EG+O":function(t,e){},Eawl:function(t,e){},F5mM:function(t,e){},GZKt:function(t,e){},Gu5N:function(t,e){},Hv4S:function(t,e){},IOV5:function(t,e){},KL86:function(t,e){},KU51:function(t,e){},LC7R:function(t,e){},LCUL:function(t,e){},MfYP:function(t,e){},MlKm:function(t,e){},NBYJ:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},o=i("VU/8")({name:"App"},a,!1,null,null,null).exports,r=i("/ocq"),s={name:"Home",data:function(){return{countDoc:""}},methods:{handleLink:function(t){var e=(new Date).getTime()+this.createUniqueId(1);this.$router.push({name:t,params:{id:e}})},loadCount:function(){var t=this;this.request.request("get",this.baseUrl+"/inter/countdoc","","").then(function(e){200===e.status&&(t.countDoc=e.data)})},createUniqueId:function(t){var e=function(){return Number(Math.random().toString().substr(2)).toString(36)},i=[];function n(){var t=e(),a=!1;i.forEach(function(e){e===t&&(a=!0)}),a?n():i.push(t)}for(var a=0;a<1;)n(),a++;return this.uniqueId=i[0],i}},created:function(){this.loadCount()}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-row",{staticStyle:{"margin-top":"200px"},attrs:{type:"flex",justify:"center",gutter:30}},[i("el-col",{attrs:{span:8}},[i("div",{staticStyle:{width:"100%",height:"100%"},on:{click:function(e){return t.handleLink("import")}}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击录入",placement:"bottom-end"}},[i("el-card",{staticStyle:{cursor:"pointer"},attrs:{shadow:"hover"}},[i("p",{staticClass:"home-p"},[t._v("我要录入")])])],1)],1)]),t._v(" "),i("el-col",{attrs:{span:8}},[i("div",{staticStyle:{width:"100%",height:"100%"},on:{click:function(e){return t.handleLink("select")}}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击查询",placement:"bottom-end"}},[i("el-badge",{attrs:{value:t.countDoc,max:500,type:"warning"}},[i("el-card",{staticStyle:{cursor:"pointer"},attrs:{shadow:"hover"}},[i("p",{staticClass:"home-p"},[t._v("我要查询")])])],1)],1)],1)])],1),t._v(" "),i("el-container",[i("p",{staticStyle:{position:"absolute",bottom:"0",width:"100%","text-align":"center",color:"#C0C4CC","font-size":"14px"}},[t._v("©2020 Data Integration Code Platform v1.0.0")])])],1)},staticRenderFns:[]},c=i("VU/8")(s,l,!1,null,null,null).exports,u=i("mvHQ"),d=i.n(u),p=i("SzW+"),f={props:{codes:{type:String,default:function(){return"function run(){\n\n}"}},editHeight:{type:Number,default:function(){return document.querySelector("html").clientHeight-95}},editWidth:{type:String,default:function(){return"100%"}},readOnly:{type:String,default:function(){return"true"}}},data:function(){return{editorHeight:"",editorWidth:"",readonly:""}},created:function(){this.editorWidth=this.editWidth,this.editorHeight=100==this.editHeight?document.querySelector("html").clientHeight-95:document.querySelector("html").clientHeight-276,this.readonly=this.readOnly},watch:{codes:{handler:function(t){"false"!=this.readonly&&this.monacoEditor.setValue(t)}}},mounted:function(){this.initEditor()},methods:{initEditor:function(){var t=this;t.monacoEditor=p.editor.create(t.$refs.container,{value:t.codes,language:"javascript",theme:"vs-dark",readOnly:t.readOnly,autoIndent:!0,automaticLayout:!0,glyphMargin:!0}),t.$emit("onMounted",t.monacoEditor),t.monacoEditor.onDidChangeModelContent(function(e){t.codesCopy=t.monacoEditor.getValue(),t.$emit("onCodeChange",t.monacoEditor.getValue(),e)})}}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"myEditor"},[e("div",{ref:"container",style:{height:this.editorHeight+"px",width:this.editorWidth},attrs:{id:"container"}})])},staticRenderFns:[]};var h=i("VU/8")(f,g,!1,function(t){i("z1f/")},"data-v-35b2f68c",null).exports,m={name:"Import",components:{MyEditor:h},data:function(){return{centerDialogVisible:!1,jsEditor:"",uploadTextUrl:this.baseUrl+"/inter/uploadtext",fullscreenLoading:!1,uploadUrl:this.baseUrl+"/inter/upload",typeList:[],tagColors:["","success","info","warning","danger"],pictureList:[],dixTags:["v5.15.0","v5.14.0","v5.13.0","v5.12.0","v5.11.0","v5.10.0","v5.9.0","v5.8.0","v5.7.0","v5.6.0"],inputVisible:!1,inputValue:"",dialogImageUrl:"",dialogVisible:!1,singleFilePro:{},singleTextFilePro:{},formLabelAlign:{interEditor:"",interId:"",interName:"",interDesc:"",dixTag:"",interTag:[],interCode:"function run(){\n}"}}},methods:{centerDialog:function(){var t=this,e=this.formLabelAlign;if(""===e.interName)this.$message.error("请输入名称!!");else if(""===e.dixTag)this.$message.error("请选择DIX版本!!");else if(""===e.interTag)this.$message.error("请添加代码相关的关键词!!");else if(""===e.interDesc)this.$message.error("请添加代码相关描述!!");else{this.fullscreenLoading=!0;var i=this.formLabelAlign,n=i.interCode;i.interCode=d()({interCode:n}),this.request.request("post",this.baseUrl+"/inter/save","",i).then(function(e){1===e.data?(t.centerDialogVisible=!1,t.fullscreenLoading=!1,t.$router.push({name:"select"})):(t.fullscreenLoading=!1,t.$message.error("保存失败, 请检查所填写的字段!"))})}},centerDialogError:function(){this.centerDialogVisible=!1,this.$notify({title:"如何格式化",dangerouslyUseHTMLString:!0,message:'<p>将鼠标移入代码编辑器中</br>鼠标右键选择</br><span style="color:#e6a23c">Format Document</span></p>',duration:1e4,type:"warning"})},handleBeforeUpload:function(t){this.singleFilePro.uid=t.uid,this.singleFilePro.interId=this.formLabelAlign.interId},handleFileBeforeUpload:function(t){this.singleTextFilePro.uid=t.uid,this.singleTextFilePro.interId=this.formLabelAlign.interId},handleSave:function(){this.centerDialogVisible=!0},javascriptOnMounted:function(t){this.jsEditor=t},javascriptOnCodeChange:function(t,e){this.formLabelAlign.interCode=t},handleRemove:function(t,e){var i=this,n=t.uid,a={};a.fileName=t.name,a.uid=t.uid,a.interId=this.formLabelAlign.interId,this.request.request("post",this.baseUrl+"/inter/removeimage","",a).then(function(t){var e=i.pictureList;e.forEach(function(t){n===t.uid&&(e.splice(t,1),i.pictureList=e)})})},handleTextSuccess:function(t,e,i){this.jsEditor.setValue(t)},handleSuccess:function(t,e,i){this.pictureList.push({name:e.name,url:e.url,uid:e.uid})},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleClose:function(t){this.formLabelAlign.interTag.splice(this.formLabelAlign.interTag.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this.inputValue;t&&(t=t.replace(/ /g,""),-1===this.formLabelAlign.interTag.indexOf(t)&&this.formLabelAlign.interTag.push(t.toLowerCase())),this.inputVisible=!1,this.inputValue=""},goBack:function(){this.$router.push({name:"home"})},handleSelect:function(t){this.handleInputConfirm()},querySearch:function(t,e){var i=this.typeList;e(t?i.filter(this.createFilter(t)):i)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},loadTags:function(){var t=this;this.request.request("get",this.baseUrl+"/inter/querytag","","").then(function(e){t.typeList=e.data})}},created:function(){this.loadTags()},mounted:function(){this.formLabelAlign.interId=this.$route.params.id}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{attrs:{shadow:"hover"}},[i("el-page-header",{attrs:{content:"代码录入"},on:{back:t.goBack}}),t._v(" "),i("p",{staticStyle:{position:"absolute",top:"17px",left:"210px",height:"16px","border-left":"1px solid #C0C4CC"}}),t._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{position:"absolute",top:"23px",left:"230px","font-size":"14px"},attrs:{type:"text"},on:{click:t.handleSave}},[t._v("保存")])],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-card",{staticStyle:{"margin-top":"10px"},attrs:{shadow:"hover"}},[i("el-form",{attrs:{"label-position":"left","label-width":"80px",model:t.formLabelAlign}},[i("el-row",{attrs:{gutter:6}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-form-item",{attrs:{label:"名称"}},[i("span",{staticClass:"imput-span"},[t._v("*")]),t._v(" "),i("el-input",{attrs:{placeholder:"输入脚本名称"},model:{value:t.formLabelAlign.interName,callback:function(e){t.$set(t.formLabelAlign,"interName",e)},expression:"formLabelAlign.interName"}})],1)],1)])],1),t._v(" "),i("el-row",{attrs:{gutter:6}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"描述"}},[i("span",{staticClass:"imput-span"},[t._v("*")]),t._v(" "),i("el-input",{attrs:{placeholder:"针对脚本中业务简单描述"},model:{value:t.formLabelAlign.interDesc,callback:function(e){t.$set(t.formLabelAlign,"interDesc",e)},expression:"formLabelAlign.interDesc"}})],1)],1)],1),t._v(" "),i("el-row",{attrs:{gutter:6}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{staticStyle:{"margin-bottom":"1px"},attrs:{label:"作者"}},[i("el-input",{attrs:{placeholder:"建议填写, 以便查阅者向您咨询"},model:{value:t.formLabelAlign.interEditor,callback:function(e){t.$set(t.formLabelAlign,"interEditor",e)},expression:"formLabelAlign.interEditor"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:8,offset:4}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-form-item",{staticStyle:{"margin-bottom":"1px"},attrs:{label:"DIX版本"}},[i("span",{staticClass:"imput-span"},[t._v("*")]),t._v(" "),i("el-select",{attrs:{placeholder:"选择DIX版本"},model:{value:t.formLabelAlign.dixTag,callback:function(e){t.$set(t.formLabelAlign,"dixTag",e)},expression:"formLabelAlign.dixTag"}},t._l(t.dixTags,function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1)])],1),t._v(" "),i("el-form-item",{attrs:{label:"关键词"}},[i("span",{staticClass:"imput-span"},[t._v("*")]),t._v(" "),t._l(t.formLabelAlign.interTag,function(e,n){return i("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1,type:t.tagColors[n]},on:{close:function(i){return t.handleClose(e)}}},[t._v(t._s(e))])}),t._v(" "),t.inputVisible?i("el-autocomplete",{ref:"saveTagInput",staticClass:"input-new-tag",staticStyle:{width:"200px"},attrs:{size:"small","fetch-suggestions":t.querySearch,placeholder:"若无对应项, 请输入"},on:{select:t.handleSelect},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):t._e(),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加关键词, 若候选框没有符合选项, 直接输入按回车即可",placement:"bottom-end"}},[!t.inputVisible&&t.formLabelAlign.interTag.length<5?i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[i("i",{staticClass:"el-icon-plus"})]):t._e()],1),t._v(" "),i("p",{staticStyle:{"font-size":"12px",margin:"0px",color:"#e6a23c","margin-bottom":"-20px"}},[t._v("请尽可能多的添加关键词, 这样检索效率会更高!")])],2)],1)],1),t._v(" "),i("el-card",{staticStyle:{"margin-top":"10px"},attrs:{shadow:"hover"}},[i("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[i("el-form-item",{staticStyle:{"margin-bottom":"-12px"},attrs:{label:"图片"}},[i("el-upload",{attrs:{action:t.uploadUrl,"list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload,data:t.singleFilePro,"file-list":t.pictureList}},[0===t.pictureList.length?i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("若无文本格式的代码, 则将代码图片上传!")]):t._e(),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上传图片",placement:"bottom"}},[i("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)],1)],1),t._v(" "),i("el-card",{staticStyle:{"margin-top":"10px"},attrs:{shadow:"hover"}},[i("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[i("el-form-item",{attrs:{label:"文件"}},[i("el-upload",{staticClass:"upload-demo",attrs:{drag:"","before-upload":t.handleFileBeforeUpload,data:t.singleTextFilePro,action:t.uploadTextUrl,"on-success":t.handleTextSuccess}},[i("i",{staticClass:"el-icon-upload"}),t._v(" "),i("div",{staticClass:"el-upload__text"},[t._v("\n                将代码文件拖到此处，或\n                "),i("em",[t._v("点击上传")])]),t._v(" "),i("div",{staticClass:"el-upload__tip",staticStyle:{"margin-bottom":"-18px","margin-top":"-10px"},attrs:{slot:"tip"},slot:"tip"},[t._v("亦可将代码(*.txt/*.js)文件直接上传, 自动填充右侧代码块")])])],1)],1)],1)],1),t._v(" "),i("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[i("el-card",{attrs:{shadow:"hover",id:"myeditor"}},[i("MyEditor",{attrs:{editHeight:100,readOnly:"false",codes:t.formLabelAlign.interCode},on:{onMounted:t.javascriptOnMounted,onCodeChange:t.javascriptOnCodeChange}})],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"保存确认",visible:t.centerDialogVisible,"close-on-click-modal":"",width:"25%"},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[i("p",{staticStyle:{"font-size":"14px"}},[t._v("为了文档查阅时候更清晰, 且符合安全规范, 请您进行如下确认")]),t._v(" "),i("p",{staticStyle:{"font-size":"13px",color:"#e6a23c"}},[t._v("1.文档中涉及IP, 用户, 密码等涉密信息是否处理")]),t._v(" "),i("p",{staticStyle:{"font-size":"13px",color:"#e6a23c"}},[t._v("2.文档内容是否格式化")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{icon:"el-icon-success",size:"mini",type:"warning",plain:""},on:{click:t.centerDialog}},[t._v("我已确认")]),t._v(" "),i("el-button",{attrs:{icon:"el-icon-question",size:"mini",type:"info",plain:""},on:{click:t.centerDialogError}},[t._v("如何格式化")])],1)])],1)},staticRenderFns:[]},b=i("VU/8")(m,v,!1,null,null,null).exports,_={components:{MyEditor:h},name:"Select",data:function(){return{imgTip:!1,preTags:[],preDoc:"",loading:!1,preCode:"",drawer:!1,hideOnSinglePage:!0,currentPage:1,typeList:[],inputValue:"",tagColors:["success","danger","","warning","danger"],dynamicTags:[],tableData:[],allTableData:[]}},methods:{handleBeforeClose:function(t){this.imgTip=!1,this.preCode="",this.preTags=[],this.preDoc="",this.drawer=!1},handlePreview:function(t,e){var i=this;this.preTags=[],JSON.parse(e.interTag).forEach(function(t){i.preTags.push(t)}),this.preCode=JSON.parse(e.interCode).interCode,this.preCode.length<25&&(this.imgTip=!0),this.preDoc=e,this.drawer=!0},handleDetail:function(t,e){var i=this.dynamicTags;this.$router.push({name:"detail",params:{id:e.interId,intertag:i}})},handleInputConfirm:function(){var t=this.inputValue;t&&-1===this.dynamicTags.indexOf(t)&&this.dynamicTags.push(t.toLowerCase()),this.inputVisible=!1,this.inputValue="",this.loadDocs()},handleClose:function(t){this.dynamicTags.splice(this.dynamicTags.indexOf(t),1),this.loadDocs()},goBack:function(){this.$router.push({name:"home"})},handleSelect:function(t){this.handleInputConfirm()},querySearch:function(t,e){var i=this.typeList;e(t?i.filter(this.createFilter(t)):i)},createFilter:function(t){return function(e){return-1!=e.value.toLowerCase().indexOf(t.toLowerCase())}},loadTags:function(){var t=this;this.request.request("get",this.baseUrl+"/inter/querytag","","").then(function(e){t.typeList=e.data})},loadDocs:function(){var t=this;this.loading=!0,this.request.request("post",this.baseUrl+"/inter/querydoc","",this.dynamicTags).then(function(e){200===e.status&&(t.tableData.length=0,t.tableData=e.data),t.loading=!1})},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){console.log("当前页: "+t)},routerBack:function(){var t=this.$route.params.intertag;void 0===t||0===t.length?this.dynamicTags=[]:this.dynamicTags=t}},created:function(){this.routerBack(),this.loadTags(),this.loadDocs()},mounted:function(){}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{staticStyle:{"margin-bottom":"10px"},attrs:{shadow:"hover"}},[i("el-page-header",{attrs:{content:"代码检索"},on:{back:t.goBack}})],1),t._v(" "),i("div",{staticStyle:{"margin-top":"70px","text-align":"center"}},[0===t.dynamicTags.length?i("div",{staticClass:"logoimg"},[i("img",{attrs:{src:"/code/static/search.png",height:"100px"}})]):i("div",{staticStyle:{"margin-bottom":"20px","padding-top":"15px",height:"30px"}},t._l(t.dynamicTags,function(e,n){return i("el-tag",{key:e,staticStyle:{animation:"opc 1s"},attrs:{closable:"","disable-transitions":!1,type:t.tagColors[n]},on:{close:function(i){return t.handleClose(e)}}},[t._v(t._s(e))])}),1),t._v(" "),i("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"700px","margin-bottom":"30px"},attrs:{"fetch-suggestions":t.querySearch,placeholder:"输入要检索的内容...","suffix-icon":"el-icon-search"},on:{select:t.handleSelect},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"20px"}},[i("el-col",[i("el-card",{attrs:{shadow:"never"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData}},[i("el-table-column",{attrs:{prop:"interDesc",label:"描述",width:"500"}}),t._v(" "),i("el-table-column",{attrs:{prop:"interTag",label:"关键词",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(JSON.parse(e.row.interTag),function(e,n){return i("el-tag",{key:n,attrs:{type:t.tagColors[n%5],"disable-transitions":""}},[t._v(t._s(e))])})}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"interCreateTime","min-width":"200",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.interCreateTime))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"200",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",plain:"",type:"warning"},on:{click:function(i){return t.handlePreview(e.$index,e.row)}}},[t._v("预览")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"info",plain:""},on:{click:function(i){return t.handleDetail(e.$index,e.row)}}},[t._v("详情")])]}}])})],1)],1)],1)],1),t._v(" "),i("el-drawer",{attrs:{"show-close":"",direction:"ltr",visible:t.drawer,wrapperClosable:!1,size:"50%","destroy-on-close":!0,"before-close":t.handleBeforeClose},on:{"update:visible":function(e){t.drawer=e}}},[i("p",{staticStyle:{position:"absolute",top:"0px","font-size":"19px",left:"12px"}},[t._v("代码预览")]),t._v(" "),t.imgTip?i("span",{staticStyle:{color:"#e6a23c",position:"absolute",top:"52px",left:"12px","font-size":"13px"}},[t._v("该文档可能包含图片, 点击详情查阅")]):t._e(),t._v(" "),i("el-card",{attrs:{shadow:"never"}},[i("div",[i("p",{staticStyle:{color:"#303133"}},[t._v("\n          文档ID :\n          "),i("span",{staticStyle:{color:"#909399","margin-left":"12px","font-size":"14px"}},[t._v(t._s(t.preDoc.interId))])]),t._v(" "),i("p",{staticStyle:{color:"#303133"}},[t._v("\n          DIX版本 :\n          "),i("span",{staticStyle:{color:"#e6a23c","margin-left":"5px","font-size":"14px"}},[t._v(t._s(t.preDoc.dixTag))])]),t._v(" "),i("p",{staticStyle:{color:"#303133"}},[t._v("\n          文档描述 :\n          "),i("span",{staticStyle:{color:"#e6a23c","font-size":"14px"}},[t._v(t._s(t.preDoc.interDesc))])]),t._v(" "),i("p",t._l(t.preTags,function(e,n){return i("el-tag",{key:e,attrs:{"disable-transitions":!1,type:t.tagColors[n]}},[t._v(t._s(e))])}),1)])]),t._v(" "),i("el-card",{staticStyle:{"margin-top":"-20px"},attrs:{shadow:"never",id:"myeditor"}},[i("MyEditor",{attrs:{readOnly:"true",codes:t.preCode,editHeight:200}})],1)],1)],1)},staticRenderFns:[]},x=i("VU/8")(_,y,!1,null,null,null).exports,C={name:"DetailFull",components:{MyEditor:h},data:function(){return{jsEditor:"",centerDialogVisible:!1,loading:!1,preTags:[],interDoc:"",interId:"",lastTag:[],docSuggest:"",tagColors:["warning","success","info","","danger"],interCode:"",srcList:[]}},methods:{javascriptOnMounted:function(t){this.jsEditor=t},centerDialog:function(){this.centerDialogVisible=!1,this.$router.push({name:"select",params:{intertag:this.lastTag}}),this.$message({type:"success",message:"希望您也可以录入相关代码, 来帮助到更多的人"})},centerDialogError:function(){this.centerDialogVisible=!1,this.$router.push({name:"select",params:{intertag:this.lastTag}}),this.$message({type:"info",message:"尝试查看其他文档来获取帮助, 期待我们进一步完善吧"})},goBack:function(){this.centerDialogVisible=!0},loadDoc:function(){var t=this;this.preTags=[],this.request.request("post",this.baseUrl+"/inter/querydocbyid","",this.interId).then(function(e){(t.interDoc=e.data,JSON.parse(e.data.interTag).forEach(function(e){t.preTags.push(e)}),e.data.interImage)&&JSON.parse(e.data.interImage).forEach(function(e){t.srcList.push(t.baseUrl+"/inter/getimage/"+e)});t.interCode=JSON.parse(e.data.interCode).interCode,t.jsEditor.setValue(t.interCode)})},handleSuggest:function(){var t=this;this.loading=!0;var e={};e.docSuggest=this.docSuggest,e.interId=this.interId,this.request.request("post",this.baseUrl+"/inter/docsuggest","",e).then(function(e){setTimeout(function(){t.loading=!1},500),200===e.status&&(t.docSuggest="",t.$message({message:"非常感谢您退出的宝贵意见, 我们将认真参考您的建议, 对代码进行优化!",type:"success"}))})}},created:function(){this.interId=this.$route.params.id,this.lastTag=this.$route.params.intertag,this.loadDoc()}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{staticStyle:{"margin-bottom":"10px"},attrs:{shadow:"hover"}},[i("el-page-header",{attrs:{content:"代码查看"},on:{back:t.goBack}})],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:7}},[i("el-card",{attrs:{shadow:"never"}},[i("div",[i("p",{staticStyle:{color:"#303133"}},[t._v("\n            文档ID:\n            "),i("span",{staticStyle:{color:"#909399","margin-left":"12px","font-size":"14px"}},[t._v(t._s(t.interDoc.interId))])]),t._v(" "),i("p",{staticStyle:{color:"#303133"}},[t._v("\n            文档名称:\n            "),i("span",{staticStyle:{color:"#909399","font-size":"14px"}},[t._v(t._s(t.interDoc.interName))])]),t._v(" "),i("p",{staticStyle:{color:"#303133"}},[t._v("\n            DIX版本 :\n            "),i("span",{staticStyle:{color:"#e6a23c","font-size":"14px"}},[t._v(t._s(t.interDoc.dixTag))])]),t._v(" "),i("p",{staticStyle:{color:"#303133"}},[t._v("\n            创建时间:\n            "),i("span",{staticStyle:{color:"#909399","font-size":"14px"}},[t._v(t._s(t.interDoc.interCreateTime))])]),t._v(" "),i("p",{staticStyle:{color:"#303133"}},[t._v("\n            文档描述:\n            "),i("span",{staticStyle:{color:"#e6a23c","font-size":"14px"}},[t._v(t._s(t.interDoc.interDesc))])]),t._v(" "),i("p",{staticStyle:{color:"#303133"}},[t._v("\n            文档作者:\n            "),i("span",{staticStyle:{color:"#909399","font-size":"14px"}},[t._v(t._s(t.interDoc.interEditor))])]),t._v(" "),i("p",t._l(t.preTags,function(e,n){return i("el-tag",{key:e,attrs:{"disable-transitions":!1,type:t.tagColors[n]}},[t._v(t._s(e))])}),1),t._v(" "),i("p",{staticStyle:{"margin-bottom":"0"}},t._l(t.srcList,function(e,n){return i("el-image",{key:n,staticStyle:{width:"150px",height:"150px","margin-right":"10px"},attrs:{src:e,"preview-src-list":t.srcList}})}),1)])]),t._v(" "),i("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[t._v("\n        优化建议:\n        "),i("el-input",{staticStyle:{"margin-top":"10px"},attrs:{type:"textarea",rows:7,placeholder:"请输入建议改进的部分"},model:{value:t.docSuggest,callback:function(e){t.docSuggest=e},expression:"docSuggest"}}),t._v(" "),i("el-button",{staticStyle:{float:"right",margin:"10px 0px"},attrs:{size:"small",plain:"",type:"warning"},on:{click:t.handleSuggest}},[t._v("提交")])],1)],1),t._v(" "),i("el-col",{attrs:{span:17}},[i("el-card",{attrs:{shadow:"never",id:"myeditor"}},[i("MyEditor",{attrs:{editHeight:100,codes:t.interCode},on:{onMounted:t.javascriptOnMounted}})],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.centerDialogVisible,width:"25%",center:"","show-close":!1}},[i("span",[t._v("请问该篇文章对您是否有帮助 ?")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{icon:"el-icon-star-on",size:"mini",type:"warning",plain:""},on:{click:t.centerDialog}},[t._v("有")]),t._v(" "),i("el-button",{attrs:{icon:"el-icon-star-off",size:"mini",type:"info",plain:""},on:{click:t.centerDialogError}},[t._v("无")])],1)])],1)},staticRenderFns:[]},w=i("VU/8")(C,S,!1,null,null,null).exports,L={name:"Modify",components:{MyEditor:h},data:function(){return{jsEditor:"",uploadTextUrl:this.baseUrl+"/inter/uploadtext",fullscreenLoading:!1,uploadUrl:this.baseUrl+"/inter/upload",typeList:[],tagColors:["","success","info","warning","danger"],pictureList:[],dixTags:["v5.15.0","v5.14.0","v5.13.0","v5.12.0","v5.11.0","v5.10.0","v5.9.0","v5.8.0","v5.7.0","v5.6.0"],inputVisible:!1,inputValue:"",dialogImageUrl:"",dialogVisible:!1,singleFilePro:{},singleTextFilePro:{},formLabelAlign:{interEditor:"",interId:"",interName:"",interDesc:"",dixTag:"",interTag:[],interCode:"function run(){\n}"}}},methods:{handleBeforeUpload:function(t){this.singleFilePro.uid=t.uid,this.singleFilePro.interId=this.formLabelAlign.interId},handleFileBeforeUpload:function(t){this.singleTextFilePro.uid=t.uid,this.singleTextFilePro.interId=this.formLabelAlign.interId},handleSave:function(){var t=this,e=this.formLabelAlign;if(""===e.interName)this.$message.error("请输入名称!!");else if(""===e.dixTag)this.$message.error("请选择DIX版本!!");else if(""===e.interTag)this.$message.error("请添加代码相关的关键词!!");else if(""===e.interDesc)this.$message.error("请添加代码相关描述!!");else{this.fullscreenLoading=!0;var i=this.formLabelAlign,n=i.interCode;i.interCode=d()({interCode:n}),this.request.request("post",this.baseUrl+"/inter/save","",i).then(function(e){1===e.data?(t.fullscreenLoading=!1,t.$router.push({name:"select"})):(t.fullscreenLoading=!1,t.$message.error("保存失败, 请检查所填写的字段!"))})}},javascriptOnMounted:function(t){this.jsEditor=t},javascriptOnCodeChange:function(t,e){this.formLabelAlign.interCode=t},handleRemove:function(t,e){var i=this,n=t.uid,a={};a.fileName=t.name,a.uid=t.uid,a.interId=this.formLabelAlign.interId,this.request.request("post",this.baseUrl+"/inter/removeimage","",a).then(function(t){var e=i.pictureList;e.forEach(function(t){n===t.uid&&(e.splice(t,1),i.pictureList=e)})})},handleTextSuccess:function(t,e,i){this.jsEditor.setValue(t)},handleSuccess:function(t,e,i){this.pictureList.push({name:e.name,url:e.url,uid:e.uid})},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleClose:function(t){this.formLabelAlign.interTag.splice(this.formLabelAlign.interTag.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this.inputValue;t&&-1===this.formLabelAlign.interTag.indexOf(t)&&this.formLabelAlign.interTag.push(t.toLowerCase()),this.inputVisible=!1,this.inputValue=""},goBack:function(){this.$router.push({name:"home"})},handleSelect:function(t){this.handleInputConfirm()},querySearch:function(t,e){var i=this.typeList;e(t?i.filter(this.createFilter(t)):i)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},loadTags:function(){var t=this;this.request.request("get",this.baseUrl+"/inter/querytag","","").then(function(e){t.typeList=e.data})},loadDoc:function(){var t=this,e=window.location.href;e=e.substring(e.indexOf("detail/")+7,e.indexOf("/modify")),this.request.request("post",this.baseUrl+"/inter/modifydocbyid","",e).then(function(e){if(200===e.status){if(t.formLabelAlign.dixTag=e.data.dixTag,t.formLabelAlign.interName=e.data.interName,t.formLabelAlign.interTag=JSON.parse(e.data.interTag),t.formLabelAlign.interDesc=e.data.interDesc,t.formLabelAlign.interEditor=e.data.interEditor,t.formLabelAlign.interCode=JSON.parse(e.data.interCode).interCode,e.data.interImage){var i=JSON.parse(e.data.interImage);i.forEach(function(e){e.url=t.baseUrl+"/inter/getimage/"+e.url}),t.pictureList=i}t.jsEditor.setValue(t.formLabelAlign.interCode)}})}},created:function(){this.loadTags(),this.loadDoc()},mounted:function(){this.formLabelAlign.interId=this.$route.params.id}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{attrs:{shadow:"hover"}},[i("el-page-header",{attrs:{content:"代码修改"},on:{back:t.goBack}}),t._v(" "),i("p",{staticStyle:{position:"absolute",top:"17px",left:"210px",height:"16px","border-left":"1px solid #C0C4CC"}}),t._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{position:"absolute",top:"23px",left:"230px","font-size":"14px"},attrs:{type:"text"},on:{click:t.handleSave}},[t._v("保存")])],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-card",{staticStyle:{"margin-top":"10px"},attrs:{shadow:"hover"}},[i("el-form",{attrs:{"label-position":"left","label-width":"80px",model:t.formLabelAlign}},[i("el-row",{attrs:{gutter:6}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-form-item",{attrs:{label:"名称"}},[i("span",{staticClass:"imput-span"},[t._v("*")]),t._v(" "),i("el-input",{attrs:{placeholder:"输入脚本名称"},model:{value:t.formLabelAlign.interName,callback:function(e){t.$set(t.formLabelAlign,"interName",e)},expression:"formLabelAlign.interName"}})],1)],1)])],1),t._v(" "),i("el-row",{attrs:{gutter:6}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"描述"}},[i("span",{staticClass:"imput-span"},[t._v("*")]),t._v(" "),i("el-input",{attrs:{placeholder:"针对脚本中业务简单描述"},model:{value:t.formLabelAlign.interDesc,callback:function(e){t.$set(t.formLabelAlign,"interDesc",e)},expression:"formLabelAlign.interDesc"}})],1)],1)],1),t._v(" "),i("el-row",{attrs:{gutter:6}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{staticStyle:{"margin-bottom":"1px"},attrs:{label:"作者"}},[i("el-input",{attrs:{placeholder:"建议填写, 以便查阅者向您咨询"},model:{value:t.formLabelAlign.interEditor,callback:function(e){t.$set(t.formLabelAlign,"interEditor",e)},expression:"formLabelAlign.interEditor"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:8,offset:4}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-form-item",{staticStyle:{"margin-bottom":"1px"},attrs:{label:"DIX版本"}},[i("span",{staticClass:"imput-span"},[t._v("*")]),t._v(" "),i("el-select",{attrs:{placeholder:"选择DIX版本"},model:{value:t.formLabelAlign.dixTag,callback:function(e){t.$set(t.formLabelAlign,"dixTag",e)},expression:"formLabelAlign.dixTag"}},t._l(t.dixTags,function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1)])],1),t._v(" "),i("el-form-item",{attrs:{label:"关键词"}},[i("span",{staticClass:"imput-span"},[t._v("*")]),t._v(" "),t._l(t.formLabelAlign.interTag,function(e,n){return i("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1,type:t.tagColors[n]},on:{close:function(i){return t.handleClose(e)}}},[t._v(t._s(e))])}),t._v(" "),t.inputVisible?i("el-autocomplete",{ref:"saveTagInput",staticClass:"input-new-tag",staticStyle:{width:"200px"},attrs:{size:"small","fetch-suggestions":t.querySearch,placeholder:"若无对应项, 请输入"},on:{select:t.handleSelect},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):t._e(),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加关键词, 若候选框没有符合选项, 直接输入按回车即可",placement:"bottom-end"}},[!t.inputVisible&&t.formLabelAlign.interTag.length<5?i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[i("i",{staticClass:"el-icon-plus"})]):t._e()],1),t._v(" "),i("p",{staticStyle:{"font-size":"12px",margin:"0px",color:"#e6a23c","margin-bottom":"-20px"}},[t._v("请尽可能多的添加关键词, 这样检索效率会更高!")])],2)],1)],1),t._v(" "),i("el-card",{staticStyle:{"margin-top":"10px"},attrs:{shadow:"hover"}},[i("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[i("el-form-item",{staticStyle:{"margin-bottom":"-12px"},attrs:{label:"图片"}},[i("el-upload",{attrs:{action:t.uploadUrl,"list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload,data:t.singleFilePro,"file-list":t.pictureList}},[0===t.pictureList.length?i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("若无文本格式的代码, 则将代码图片上传!")]):t._e(),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上传图片",placement:"bottom"}},[i("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)],1)],1),t._v(" "),i("el-card",{staticStyle:{"margin-top":"10px"},attrs:{shadow:"hover"}},[i("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[i("el-form-item",{attrs:{label:"文件"}},[i("el-upload",{staticClass:"upload-demo",attrs:{drag:"","before-upload":t.handleFileBeforeUpload,data:t.singleTextFilePro,action:t.uploadTextUrl,"on-success":t.handleTextSuccess}},[i("i",{staticClass:"el-icon-upload"}),t._v(" "),i("div",{staticClass:"el-upload__text"},[t._v("\n                将代码文件拖到此处，或\n                "),i("em",[t._v("点击上传")])]),t._v(" "),i("div",{staticClass:"el-upload__tip",staticStyle:{"margin-bottom":"-18px","margin-top":"-10px"},attrs:{slot:"tip"},slot:"tip"},[t._v("亦可将代码(*.txt/*.js)文件直接上传, 自动填充右侧代码块")])])],1)],1)],1)],1),t._v(" "),i("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[i("el-card",{attrs:{shadow:"hover",id:"myeditor"}},[i("MyEditor",{attrs:{editHeight:100,readOnly:"false",codes:t.formLabelAlign.interCode},on:{onMounted:t.javascriptOnMounted,onCodeChange:t.javascriptOnCodeChange}})],1)],1)],1)],1)},staticRenderFns:[]},k=i("VU/8")(L,T,!1,null,null,null).exports;n.default.use(r.a);var D=new r.a({mode:"history",routes:[{path:"/code/",name:"home",component:c},{path:"/code/import/:id",name:"import",component:b},{path:"/code/select",name:"select",component:x},{path:"/code/detail/:id",name:"detail",component:w},{path:"/code/detail/:id/modify",name:"modify",component:k}]}),A=i("zL8q"),I=i.n(A),V=(i("tvR6"),i("zEeJ"),i("//Fk")),E=i.n(V),U=i("mtWM"),$=i.n(U);function O(t){return 200===t.status?t:(A.Message.warning(t.data),t)}function q(t){if(200!=t.status)return A.Message.error("HTTP请求异常, 检查配置!!"),t}$.a.interceptors.request.use(function(t){return t},function(t){return A.Message.error("HTTP请求异常, 检查配置!!"),E.a.reject(t)}),$.a.interceptors.response.use(function(t){return t},function(t){return A.Message.error("HTTP请求异常, 检查配置!!"),E.a.reject(t.response)});var z={request:function(t,e,i,n){return"post"===t||"patch"===t||"put"===t?$()({method:t,headers:i,url:e,data:n,timeout:6e4}).then(function(t){return O(t)},function(t){return q(t)}):$()({method:t,headers:i,url:e,params:n,timeout:6e4}).then(function(t){return O(t)},function(t){return q(t)})}};n.default.use(I.a),n.default.config.productionTip=!1,n.default.prototype.request=z,n.default.prototype.baseUrl=window.location.origin,new n.default({el:"#app",router:D,components:{App:o},template:"<App/>"})},"OV+G":function(t,e){},OkZj:function(t,e){},"Q+ux":function(t,e){},Q9Nm:function(t,e){},"R/+A":function(t,e){},RB8X:function(t,e){},SoM9:function(t,e){},"Vcj/":function(t,e){},WUwp:function(t,e){},XTA7:function(t,e){},XrmI:function(t,e){},YUwp:function(t,e){},czDl:function(t,e){},gCdB:function(t,e){},gvGx:function(t,e){},"jF/U":function(t,e){},m849:function(t,e){},nLHh:function(t,e){},"o37+":function(t,e){},pJVg:function(t,e){},rc56:function(t,e){},"s/JM":function(t,e){},s0RT:function(t,e){},sOjV:function(t,e){},tVlf:function(t,e){},tiZb:function(t,e){},tvR6:function(t,e){},uHSv:function(t,e){},uNVx:function(t,e){},wtJh:function(t,e){},x33M:function(t,e){},xLAg:function(t,e){},"z1f/":function(t,e){},zEeJ:function(t,e){}},["NHnr"]);